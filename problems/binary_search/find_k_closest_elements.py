"""
Problem: Find K Closest Elements
Difficulty: Medium
Time Limit: 30 min

Description:
You are given a sorted array of integers, nums, and two integers, target and k.
Your task is to return k number of integers that are close to the target value.
The integers in the output array should be in sorted order.

Closeness criteria:
- An integer nums[i] is considered closer to target than nums[j] when:
  |nums[i] - target| < |nums[j] - target|
- When distances are equal (|nums[i] - target| == |nums[j] - target|),
  the smaller value is preferred.

Constraints:
- 1 <= k <= nums.length
- 1 <= nums.length <= 10^3
- nums is sorted in ascending order
- -10^4 <= nums[i], target <= 10^4

Examples:

Example 1:
Input: nums = [1, 2, 3, 4, 5], k = 4, target = 3
Output: [1, 2, 3, 4]

Example 2:
Input: nums = [1, 2, 3, 4, 5], k = 4, target = -1
Output: [1, 2, 3, 4]

Example 3:
Input: nums = [1, 2, 3, 4, 5], k = 4, target = 6
Output: [2, 3, 4, 5]

Example 4:
Input: nums = [1, 2, 4, 5, 6], k = 3, target = 3
Output: [1, 2, 4]
Explanation: distances are |1-3|=2, |2-3|=1, |4-3|=1, |5-3|=2, |6-3|=3
Closest 3: 2 (dist 1), 4 (dist 1), then 1 or 5 (both dist 2) → prefer smaller → 1
"""

from typing import List

"""
nums = 1 2 3 4 5 6 7
k = 3
target = 4

start = 4
end = 4
mid = 3
"""

def solution(nums: List[int], k: int, target: int) -> List[int]:
    start, end = 0, len(nums) - k

    while start < end:
        mid = (start + end)//2

        if target - nums[mid]  <= nums[mid+k] - target:
            end = mid
        else:
            start = mid + 1

    return nums[start:start+k]



TEST_CASES = [
    # (input_args, expected_output)
    # Format: ((nums, k, target), expected)
    (([1, 2, 3, 4, 5], 4, 3), [1, 2, 3, 4]),
    (([1, 2, 3, 4, 5], 4, -1), [1, 2, 3, 4]),
    (([1, 2, 3, 4, 5], 4, 6), [2, 3, 4, 5]),
    (([1, 2, 4, 5, 6], 3, 3), [1, 2, 4]),
    (([1, 1, 1, 10, 10, 10], 1, 9), [10]),
    (([1, 3, 5, 7, 9], 2, 4), [3, 5]),
    (([1, 3, 5, 7, 9], 3, 6), [3, 5, 7]),
    (([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], 5, 5), [3, 4, 5, 6, 7]),
    (([2, 4, 6, 8], 2, 5), [4, 6]),
    (([1], 1, 1), [1]),
    # User-provided edge case
    (([-9988,-9955,-9894,-9752,-9738,-9738,-9708,-9678,-9667,-9646,-9620,-9591,-9577,-9538,-9529,-9501,-9481,-9468,-9461,-9452,-9428,-9365,-9331,-9258,-9248,-9247,-9246,-9215,-9161,-9151,-9105,-9077,-9056,-8994,-8972,-8808,-8777,-8776,-8759,-8682,-8633,-8600,-8546,-8538,-8530,-8520,-8473,-8352,-8293,-8255,-8189,-8179,-8169,-8150,-8112,-8097,-8093,-7999,-7995,-7888,-7856,-7839,-7753,-7678,-7671,-7645,-7614,-7603,-7585,-7585,-7582,-7498,-7465,-7463,-7439,-7344,-7334,-7306,-7273,-7203,-7160,-7128,-6938,-6933,-6800,-6779,-6750,-6734,-6642,-6632,-6598,-6553,-6550,-6532,-6466,-6451,-6397,-6370,-6336,-6295,-6283,-6238,-6234,-6213,-6211,-6066,-6045,-5993,-5940,-5927,-5785,-5736,-5730,-5727,-5676,-5645,-5639,-5618,-5604,-5564,-5529,-5516,-5476,-5373,-5319,-5294,-5269,-5132,-5096,-5074,-5073,-5033,-5000,-4988,-4798,-4793,-4788,-4786,-4778,-4765,-4749,-4686,-4601,-4597,-4571,-4549,-4527,-4476,-4378,-4374,-4361,-4328,-4281,-4265,-4253,-4173,-4155,-4153,-4149,-4101,-4093,-4036,-3985,-3975,-3933,-3916,-3882,-3804,-3793,-3785,-3731,-3711,-3707,-3707,-3678,-3662,-3659,-3624,-3551,-3464,-3436,-3420,-3402,-3394,-3383,-3379,-3377,-3343,-3342,-3338,-3307,-3292,-3281,-3257,-3254,-3248,-3222,-3185,-3176,-3170,-3156,-3090,-3082,-3026,-3010,-2945,-2922,-2891,-2882,-2832,-2826,-2814,-2792,-2791,-2779,-2757,-2748,-2736,-2668,-2532,-2530,-2511,-2469,-2458,-2433,-2428,-2408,-2387,-2387,-2357,-2327,-2326,-2260,-2253,-2251,-2246,-2215,-2210,-2180,-2166,-2112,-2098,-2068,-2050,-2043,-2031,-1994,-1911,-1908,-1896,-1875,-1874,-1863,-1764,-1764,-1745,-1734,-1728,-1618,-1604,-1551,-1545,-1544,-1521,-1393,-1346,-1307,-1305,-1283,-1270,-1183,-1102,-992,-968,-940,-915,-912,-840,-821,-635,-562,-552,-516,-513,-489,-477,-373,-371,-292,-274,-252,-237,-237,-236,-215,-181,-166,-142,-140,-123,-111,-107,-82,-76,-47,-16,56,121,129,149,230,335,346,349,361,391,438,440,546,599,691,707,763,787,797,817,865,984,985,1059,1080,1199,1213,1230,1268,1440,1450,1503,1536,1539,1624,1666,1669,1711,1712,1759,1791,1812,1840,1922,1931,1945,1954,1987,1994,2067,2089,2121,2223,2251,2254,2256,2278,2321,2324,2328,2358,2366,2411,2453,2491,2505,2549,2635,2648,2650,2703,2703,2725,2730,2762,2780,3012,3021,3041,3121,3141,3167,3186,3189,3222,3265,3284,3456,3525,3606,3609,3678,3681,3685,3708,3712,3732,3796,3849,3876,3903,3931,3952,3988,3989,3991,4022,4077,4129,4167,4190,4242,4270,4292,4349,4380,4385,4402,4460,4526,4561,4573,4592,4639,4671,4675,4685,4736,4821,4829,4831,4833,4834,4834,4841,4943,4991,4995,5033,5161,5218,5244,5276,5315,5379,5439,5458,5503,5585,5598,5621,5636,5680,5739,5755,5761,5773,5788,5811,5842,5920,5957,6019,6041,6064,6092,6120,6146,6363,6387,6492,6517,6545,6547,6558,6580,6605,6607,6637,6649,6664,6736,6811,6836,6896,6937,6957,7005,7037,7116,7125,7172,7173,7182,7188,7193,7199,7221,7255,7389,7407,7442,7463,7551,7626,7657,7661,7701,7720,7803,7836,7847,7873,7875,7917,7975,8068,8073,8110,8111,8131,8195,8198,8229,8235,8329,8400,8421,8433,8455,8507,8575,8577,8639,8691,8716,8749,8760,8779,8796,8817,8829,8837,8887,8888,8895,8907,8909,8952,8956,9033,9047,9137,9141,9174,9174,9218,9236,9273,9287,9341,9378,9385,9387,9412,9431,9463,9521,9544,9595,9602,9745,9788,9858,9885,9897,9924,9948], 1, 2919), [3012]),
]
